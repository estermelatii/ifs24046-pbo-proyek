<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${isEdit == true ? 'Edit Item - WishTrack' : 'Tambah Item - WishTrack'}">Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        body {
            background-color: #f8fafc;
            background-image: 
                url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E"),
                radial-gradient(at 0% 0%, #f1f5f9 0px, transparent 50%),
                radial-gradient(at 100% 0%, #3b82f6 0px, transparent 50%),
                radial-gradient(at 100% 100%, #eff6ff 0px, transparent 50%),
                radial-gradient(at 0% 100%, #dbeafe 0px, transparent 50%);
            background-size: auto, cover;
            background-attachment: fixed;
            font-family: 'Poppins', sans-serif;
            color: #1e293b;
            min-height: 100vh;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .form-header {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            padding: 25px;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-7">
            <div class="card form-card">
                
                <div class="form-header">
                    <h3 class="fw-bold mb-0">
                        <i class="fas" th:classappend="${isEdit == true ? 'fa-pen-to-square' : 'fa-plus-circle'}"></i>
                        <span th:text="${isEdit == true ? 'Edit Barang' : 'Tambah Wishlist'}">Judul</span>
                    </h3>
                </div>

                <div class="card-body p-4 p-md-5">
                    <form th:action="@{${isEdit == true ? '/wishlist/update' : '/wishlist/add'}}" 
                          th:object="${wishlistForm}" 
                          method="post" 
                          enctype="multipart/form-data">
                        
                        <input type="hidden" th:field="*{id}" />

                        <div class="mb-3">
                            <label class="form-label fw-bold">Nama Barang</label>
                            <input type="text" class="form-control" th:field="*{name}" placeholder="Misal: Laptop Gaming" required>
                        </div>

                        <!-- BARIS HARGA & TABUNGAN -->
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label class="form-label fw-bold">Estimasi Harga (Rp)</label>
                                <input type="number" class="form-control" th:field="*{price}" placeholder="15000000" required>
                            </div>
                            
                            <!-- INPUT TABUNGAN BARU -->
                            <div class="col-md-4 mb-3">
                                <label class="form-label fw-bold text-success">
                                    <i class="fas fa-piggy-bank"></i> Tabungan
                                </label>
                                <input type="number" class="form-control border-success" th:field="*{savedAmount}" placeholder="0">
                                <div class="form-text small text-success">Update progress menabungmu!</div>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label class="form-label fw-bold">Kategori</label>
                                <select class="form-select" th:field="*{category}">
                                    <option value="Elektronik">Elektronik</option>
                                    <option value="Fashion">Fashion</option>
                                    <option value="Hobi">Hobi</option>
                                    <option value="Kuliah">Kebutuhan Kuliah</option>
                                    <option value="Rumah">Kebutuhan Rumah</option>
                                    <option value="Lainnya">Lainnya</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Target Tanggal Beli</label>
                            <input type="date" class="form-control" th:field="*{targetDate}">
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Link Toko (Opsional)</label>
                            <input type="url" class="form-control" th:field="*{shopUrl}" placeholder="https://shopee.co.id/...">
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Deskripsi / Catatan</label>
                            <textarea class="form-control" th:field="*{description}" rows="3"></textarea>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">Foto Barang</label>
                            <input type="file" class="form-control" th:field="*{imageFile}" accept="image/*">
                            <div class="form-text text-primary small" th:if="${isEdit}">
                                <i class="fas fa-info-circle"></i> Biarkan kosong jika tidak ingin mengubah foto.
                            </div>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary btn-lg py-3 fw-bold shadow-sm" style="background-color: #3b82f6;">
                                <i class="fas fa-save me-2"></i> Simpan
                            </button>
                            <a href="/wishlist" class="btn btn-light btn-lg text-muted">Batal</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>